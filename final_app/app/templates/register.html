<!-- templates/register.html -->
{% extends "base.html" %}
{% block title %}Registrar vaca | Cow Face ID{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style_form.css') }}">
{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <!-- aquí siempre mostramos el formulario -->
  <div class="col-md-6">
    <div id="card">
      <div id="card-content">
        <h2 id="card-title">Registrar vaca</h2>
        <div class="underline-title"></div>

        <form class="form"
              method="post"
              action="{{ url_for('web.register') }}"
              enctype="multipart/form-data">

          <label for="cow_id" class="mt-3">ID de la vaca</label>
          <input id="cow_id"
                 class="form-control form-content"
                 type="text"
                 name="cow_id"
                 placeholder="p. ej. vaca_88"
                 required>
          <div class="form-border mb-2"></div>

          <label for="images">Fotos de la cabeza (puedes seleccionar varias)</label>
          <input id="images"
                 class="form-control form-content"
                 type="file"
                 name="images"
                 accept="image/*"
                 multiple
                 required>
          <div class="form-border"></div>

          <button id="submit-btn" class="btn btn-primary mt-3">
            Registrar
          </button>
        </form>
      </div>
    </div>
  </div>

  {% if previews %}
  <!-- cuando haya previews, añadimos la columna de previsualización -->
  <div class="col-md-6">
    <h4>Previsualización</h4>
    <div class="preview-container border p-2">
      <div class="d-flex flex-wrap gap-2">
        {% for src in previews %}
          <div class="preview-box">
            <img src="{{ src }}"
                 class="preview-img rounded"
                 alt="Preview de vaca">
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
